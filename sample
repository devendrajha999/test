name: $(Date:yyyyMMdd)$(Rev:.r)

pool: "Agent"
trigger:
  - none

#schedules:
#  - cron: "*/5 0 * * 1-5"
#    displayName: Mon-Friday every 5 min
#    branches:
#      include:
#        - master
#    always: true

stages:
  - stage: TEST
    displayName: TEST Stage
    jobs:
      - job: TEST
        displayName: TEST Job
        steps:
        - task: GitClone@2
          inputs:
            repository: 
            branch: 'develop'
            depth: 1
            submodules: 'recursive'
            checkoutSubmodules: true
            clean: true
        - task: Maven@3
          inputs:
            mavenPomFile: 'pom.xml'
            mavenOptions: '-Xmx3072m'
            javaHomeOption: 'JDKVersion'
            jdkVersionOption: '1.8'
            jdkArchitectureOption: 'x64'
            publishJUnitResults: true
            testResultsFiles: '**/surefire-reports/TEST-*.xml'
            goals: 'package'
